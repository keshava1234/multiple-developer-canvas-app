Screen3 As screen:
    OnVisible: |
        =ClearCollect(collll4,'Power Outage Recovery Activity');
        //ClearCollect(collll5,ShowColumns('Power Outage Recovery Activity',"Action"));

    Dropdown1_3 As dropdown:
        Default: =""
        Items: |-
            =collll1
            //'Business Units'
        OnChange: |-
            =//Clear(ColGallerySelectedActions);
            ClearCollect(colActions,Filter(collll4,'Business Unit'.Value = Dropdown1_3.Selected.Business_Unit_Name && Phase.Value = "Life Safety"));
            Set(a,CountRows(colActions)); 
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            ClearCollect(ColListActions,ShowColumns(Filter('Power Outage Recovery Tracking','Business Unit'.Value=Dropdown1_3.SelectedText.Value),"Action"));
            Clear(colListActionValues);
            ForAll(
               ColListActions,
               Collect(
                  colListActionValues,
                  Action
               )
            )
             
        X: =527
        Y: =16
        ZIndex: =1

    Label1_3 As label:
        Text: ="Business Unit"
        X: =340
        Y: =16
        ZIndex: =2

    Button1_3 As button:
        OnSelect: |
            =Set(LFTab, true);
            Set(PSCTab, false);
            Set(PRTab, false);
            ClearCollect(colActions,Filter(collll4,'Business Unit'.Value = Dropdown1_3.Selected.Business_Unit_Name && Phase.Value = "Life Safety")) 
        Size: =10
        Text: ="Life Safety Phase"
        X: =335
        Y: =72
        ZIndex: =3

    Button1_4 As button:
        OnSelect: |-
            =Set(LFTab, false);
            Set(PSCTab, true);
            Set(PRTab, false);
            ClearCollect(colActions,Filter(collll4,'Business Unit'.Value = Dropdown1_3.Selected.Business_Unit_Name && Phase.Value = "Production Safety"))
        Size: =10
        Text: ="Production Safety Check"
        X: =596
        Y: =72
        ZIndex: =4

    Button1_5 As button:
        OnSelect: |-
            =Set(LFTab, false);
            Set(PSCTab, false);
            Set(PRTab, true);
            ClearCollect(colActions,Filter(collll4,'Business Unit'.Value = Dropdown1_3.Selected.Business_Unit_Name && Phase.Value = "Production Restart")) 
        Size: =10
        Text: ="Production Restart"
        X: =855
        Y: =72
        ZIndex: =5

    Form2 As form:
        DataSource: ='Power Outage Recovery Activity'
        DefaultMode: =FormMode.New
        Height: =278
        NumberOfColumns: =1
        Width: =579
        X: =276
        Y: =145
        ZIndex: =6

        Action_DataCard2 As typedDataCard.comboBoxMultiSelectEditCard:
            BorderStyle: =BorderStyle.Solid
            DataField: ="Action"
            Default: =ThisItem.Action
            DisplayMode: =Parent.DisplayMode
            DisplayName: =DataSourceInfo([@'Power Outage Recovery Activity'],DataSourceInfo.DisplayName,"Action")
            Fill: =RGBA(0, 0, 0, 0)
            Height: =288
            Required: =true
            Update: =DataCardValue10.SelectedItems
            Width: =579
            X: =0
            Y: =0
            ZIndex: =1

            DataCardKey10 As label:
                AutoHeight: =true
                Height: =34
                Text: =Parent.DisplayName
                Width: =Parent.Width - 60
                Wrap: =false
                X: =30
                Y: =10
                ZIndex: =1

            DataCardValue10 As combobox:
                BorderColor: =If(IsBlank(Parent.Error), Parent.BorderColor, Color.Red)
                DefaultSelectedItems: =Parent.Default
                DisplayFields: =["Value"]
                DisplayMode: =Parent.DisplayMode
                IsSearchable: =false
                Items: =Choices([@'Power Outage Recovery Activity'].Action)
                PaddingLeft: =If(Self.DisplayMode = DisplayMode.Edit, 5, 0)
                SearchFields: =["Value"]
                SearchItems: =[]
                Tooltip: =Parent.DisplayName
                Visible: =false
                Width: =Parent.Width - 60
                X: =30
                Y: =DataCardKey10.Y + DataCardKey10.Height + 5
                ZIndex: =2

            ErrorMessage8 As label:
                AutoHeight: =true
                Height: =10
                Live: =Live.Assertive
                PaddingBottom: =0
                PaddingLeft: =0
                PaddingRight: =0
                PaddingTop: =0
                Text: =Parent.Error
                Visible: =Parent.DisplayMode=DisplayMode.Edit
                Width: =Parent.Width - 60
                X: =30
                Y: =DataCardValue10.Y + DataCardValue10.Height
                ZIndex: =3

            StarVisible8 As label:
                Align: =Align.Center
                Height: =DataCardKey10.Height
                Text: ="*"
                Visible: =And(Parent.Required, Parent.DisplayMode=DisplayMode.Edit)
                Width: =30
                Wrap: =false
                Y: =DataCardKey10.Y
                ZIndex: =4

            Gallery5_1 As gallery.galleryVertical:
                DelayItemLoading: =true
                Height: =235
                Items: =colActions
                Layout: =Layout.Vertical
                LoadingSpinner: =LoadingSpinner.Data
                TemplateSize: =98
                Width: =509
                X: =40
                Y: =40
                ZIndex: =5

                Gallery6_1 As gallery.galleryVertical:
                    DelayItemLoading: =true
                    Height: =98
                    Items: =ThisItem.Action
                    Layout: =Layout.Vertical
                    LoadingSpinner: =LoadingSpinner.Data
                    TemplateSize: =If(Self.Layout = Layout.Horizontal, Min(280, Self.Width - 60), Min(280, Self.Height - 60))
                    Width: =630
                    ZIndex: =1

                    Checkbox5_1 As checkbox:
                        Default: |-
                            =//If(ThisItem.Value exactin ColGallerySelectedActions.Value,true)
                            If(ThisItem.Value exactin colListActionValues,true)
                        Height: =34
                        OnCheck: |-
                            =//ClearCollect(ColGallerySelectedActions, {BU_Id:Dropdown1_3.Selected.ID,Actions:ThisItem})
                            //ClearCollect(ColGallerySelectedActions, ThisItem.Value)
                            Collect(ColGallerySelectedActions,{Value:ThisItem.Value,BU:Dropdown1_3.SelectedText.Value})
                        OnSelect: =Select(Parent)
                        OnUncheck: |-
                            = //RemoveIf(ColGallerySelectedActions, BU_Id=Dropdown1_3.Selected.ID,ThisItem.IsSelected)
                             RemoveIf(ColGallerySelectedActions, Value = ThisItem.Value)
                        Text: =ThisItem.Value
                        Width: =427
                        ZIndex: =1

        "'Business Unit_DataCard2' As typedDataCard.comboBoxEditCard":
            BorderStyle: =BorderStyle.Solid
            DataField: ="Business_x0020_Unit"
            Default: =ThisItem.'Business Unit'
            DisplayMode: =Parent.DisplayMode
            DisplayName: =DataSourceInfo([@'Power Outage Recovery Activity'],DataSourceInfo.DisplayName,"Business_x0020_Unit")
            Fill: =RGBA(0, 0, 0, 0)
            Height: =50
            Required: =true
            Update: =DataCardValue11.Selected
            Width: =579
            X: =0
            Y: =1
            ZIndex: =1

            DataCardKey11 As label:
                AutoHeight: =true
                Height: =34
                Text: =Parent.DisplayName
                Width: =Parent.Width - 60
                Wrap: =false
                X: =30
                Y: =10
                ZIndex: =1

            DataCardValue11 As combobox:
                BorderColor: =If(IsBlank(Parent.Error), Parent.BorderColor, Color.Red)
                Default: =Dropdown1_3.Selected
                DefaultSelectedItems: |-
                    =//Parent.Default
                    Dropdown1_3.SelectedText
                DisplayFields: =["Value"]
                DisplayMode: =Parent.DisplayMode
                IsSearchable: =false
                Items: =Choices([@'Power Outage Recovery Activity'].'Business Unit')
                PaddingLeft: =If(Self.DisplayMode = DisplayMode.Edit, 5, 0)
                SearchFields: =["Value"]
                SearchItems: =[]
                SelectMultiple: =false
                Tooltip: =Parent.DisplayName
                Width: =Parent.Width - 60
                X: =30
                Y: =DataCardKey11.Y + DataCardKey11.Height + 5
                ZIndex: =2

            ErrorMessage9 As label:
                AutoHeight: =true
                Height: =10
                Live: =Live.Assertive
                PaddingBottom: =0
                PaddingLeft: =0
                PaddingRight: =0
                PaddingTop: =0
                Text: =Parent.Error
                Visible: =Parent.DisplayMode=DisplayMode.Edit
                Width: =Parent.Width - 60
                X: =30
                Y: =DataCardValue11.Y + DataCardValue11.Height
                ZIndex: =3

            StarVisible9 As label:
                Align: =Align.Center
                Height: =DataCardKey11.Height
                Text: ="*"
                Visible: =And(Parent.Required, Parent.DisplayMode=DisplayMode.Edit)
                Width: =30
                Wrap: =false
                Y: =DataCardKey11.Y
                ZIndex: =4

        Phase_DataCard2 As typedDataCard.comboBoxEditCard:
            BorderStyle: =BorderStyle.Solid
            DataField: ="Phase"
            Default: =ThisItem.Phase
            DisplayMode: =Parent.DisplayMode
            DisplayName: =DataSourceInfo([@'Power Outage Recovery Activity'],DataSourceInfo.DisplayName,"Phase")
            Fill: =RGBA(0, 0, 0, 0)
            Height: =50
            Required: =false
            Update: =DataCardValue12.Selected
            Width: =579
            X: =0
            Y: =2
            ZIndex: =1

            DataCardKey12 As label:
                AutoHeight: =true
                Height: =34
                Text: =Parent.DisplayName
                Width: =Parent.Width - 60
                Wrap: =false
                X: =30
                Y: =10
                ZIndex: =1

            DataCardValue12 As combobox:
                BorderColor: =If(IsBlank(Parent.Error), Parent.BorderColor, Color.Red)
                DefaultSelectedItems: |-
                    =//Parent.Default
                    //Dropdown1_3.SelectedText.Phase
                    If(CountRows(colActions)>0,["Life Safety"])
                DisplayFields: =["Value"]
                DisplayMode: =Parent.DisplayMode
                IsSearchable: =false
                Items: =Choices([@'Power Outage Recovery Activity'].Phase)
                PaddingLeft: =If(Self.DisplayMode = DisplayMode.Edit, 5, 0)
                SearchFields: =["Value"]
                SearchItems: =[]
                SelectMultiple: =false
                Tooltip: =Parent.DisplayName
                Width: =Parent.Width - 60
                X: =30
                Y: =DataCardKey12.Y + DataCardKey12.Height + 5
                ZIndex: =2

            ErrorMessage10 As label:
                AutoHeight: =true
                Height: =10
                Live: =Live.Assertive
                PaddingBottom: =0
                PaddingLeft: =0
                PaddingRight: =0
                PaddingTop: =0
                Text: =Parent.Error
                Visible: =Parent.DisplayMode=DisplayMode.Edit
                Width: =Parent.Width - 60
                X: =30
                Y: =DataCardValue12.Y + DataCardValue12.Height
                ZIndex: =3

            StarVisible10 As label:
                Align: =Align.Center
                Height: =DataCardKey12.Height
                Text: ="*"
                Visible: =And(Parent.Required, Parent.DisplayMode=DisplayMode.Edit)
                Width: =30
                Wrap: =false
                Y: =DataCardKey12.Y
                ZIndex: =4

    Button4 As button:
        OnSelect: |+
            =ClearCollect(colActions,Filter(collll4,'Business Unit'.Value = Dropdown1_3.Selected.Business_Unit_Name && Phase.Value = "Production Safety"));
            Set(b,CountRows(colActions));
            ClearCollect(AllPhasesCollection,  DataCardValue12.Selected.Value);
            Navigate(Screen4);
            
        Text: ="Next"
        X: =545
        Y: =695
        ZIndex: =7

    lblStatus As label:
        Text: ="Status"
        Width: =185
        X: =305
        Y: =470
        ZIndex: =8

    Dropdown2 As dropdown:
        Items: |-
            =//Choices('Power Outage Recovery Tracking'
            Choices([@'Power Outage Recovery Tracking'].Status)
        X: =495
        Y: =470
        ZIndex: =9

    Label4_1 As label:
        Text: ="Time Started"
        Width: =190
        X: =306
        Y: =536
        ZIndex: =10

    DatePicker1 As datepicker:
        X: =496
        Y: =536
        ZIndex: =11

    Label4_2 As label:
        Text: ="Time Completed"
        Width: =190
        X: =306
        Y: =596
        ZIndex: =12

    DatePicker2 As datepicker:
        X: =496
        Y: =596
        ZIndex: =13

    Label4_3 As label:
        Text: ="Total Time"
        Width: =190
        X: =306
        Y: =645
        ZIndex: =14

    Label4_4 As label:
        Text: ="Total Time"
        Width: =190
        X: =496
        Y: =645
        ZIndex: =15

    Button5 As button:
        OnSelect: |-
            =ClearCollect(ColListActions,ShowColumns(Filter('Power Outage Recovery Tracking','Business Unit'.Value=Dropdown1_3.SelectedText.Value),"Action"));
            Clear(colListActionValues);
            ForAll(
               ColListActions,
               Collect(
                  colListActionValues,
                  Action
               )
            )
             
        Text: ="ListActionsColl"
        X: =40
        Y: =40
        ZIndex: =16

